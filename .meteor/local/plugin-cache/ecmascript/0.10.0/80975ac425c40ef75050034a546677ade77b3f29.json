{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$5","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$6","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$8","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$9","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$10","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$12","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$13","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$16","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$17","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$18","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$20","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$21","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$22","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$23","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$24","visitor":{"_exploded":{},"_verified":{},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"client/Chat/message/message.js","filename":"client/Chat/message/message.js","sourceMapTarget":"client/Chat/message/message.js.map","sourceMaps":true,"passPerPreset":false,"envName":"development","cwd":"/home/juju/app","parserOpts":{"sourceType":"module","sourceFileName":"client/Chat/message/message.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"client/Chat/message/message.js","comments":true,"compact":false,"sourceMaps":true,"sourceMapTarget":"client/Chat/message/message.js.map","sourceFileName":"client/Chat/message/message.js"}},"code":"Template.message.rendered = function () {\n  document.title = \"Message\";\n  var sessionID = Session.get(\"userID\");\n\n  if (sessionID == null) {\n    Router.go('/connexion');\n  }\n\n  Tracker.autorun(function () {\n    Inscription.find();\n    var user = Inscription.findOne({\n      _id: Session.get('userID'),\n      etat: false\n    });\n\n    if (user) {\n      var sessionID = Session.get(\"userID\");\n      var heure = new Date();\n      var heureDeco = heure.getTime();\n      Meteor.call('deco', sessionID);\n      Meteor.call('heureDeco', sessionID, heureDeco);\n      Session.set(\"userID\", null);\n\n      if (Session.get(\"userID\") == null) {\n        Router.go('/connexion');\n      }\n\n      ;\n    }\n  });\n};\n\nTemplate.message.helpers({\n  messages: function () {\n    var sessionID = Session.get(\"userID\");\n    var contactID = Session.get(\"contactID\");\n    Meteor.call('notification', sessionID, contactID);\n    return Message.find({\n      $or: [{\n        idClient1: sessionID,\n        idClient2: contactID,\n        luClient1: \"true\"\n      }, {\n        idClient1: contactID,\n        idClient2: sessionID,\n        luClient2: \"true\"\n      }]\n    }, {\n      sort: {\n        hours: 1\n      }\n    }).fetch();\n  },\n  color: function () {\n    if (this.idClient1 === Session.get(\"userID\")) {\n      return 'text-success text-right';\n    }\n\n    return 'text-danger text-left ';\n  },\n  infoPerso: function () {\n    var sessionID = Session.get(\"userID\");\n    var contactID = Session.get(\"contactID\");\n    var infoPersonne = Contact.find({\n      userIdNow: sessionID,\n      contact: contactID\n    });\n    return infoPersonne;\n  },\n  lastConnexion: function () {\n    var contactID = Session.get(\"contactID\");\n    var sessionID = Session.get(\"userID\");\n    var deco = Connexion.findOne({\n      userIdNow: contactID\n    });\n\n    if (deco.deconnexion != 0) {\n      var deconnexion = deco.deconnexion;\n      var date = new Date(deconnexion);\n      var day = date.getDate();\n      var month = date.getMonth() + 1;\n      var year = date.getFullYear();\n      var hours = date.getHours();\n      var minutes = date.getMinutes();\n      var final = \"Hors ligne depuis \" + day + \"/\" + month + \"/\" + year + \"  \" + hours + \":\" + minutes;\n      return final;\n    } else {\n      return \"En ligne\";\n    }\n  },\n  couleur: function () {\n    var contactID = Session.get(\"contactID\");\n    var sessionID = Session.get(\"userID\");\n    var deco = Connexion.findOne({\n      userIdNow: contactID\n    });\n\n    if (deco.deconnexion == 0) {\n      return 'text-success';\n    } else {\n      return 'text-danger';\n    }\n  },\n  statut: function () {\n    var contactID = Session.get(\"contactID\");\n    var statut = Inscription.findOne({\n      _id: contactID\n    });\n\n    if (statut) {\n      return statut.statut;\n    }\n  }\n});\nTemplate.message.events({\n  'submit form': function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    var sessionID = Session.get(\"userID\");\n    var contactID = Session.get(\"contactID\");\n    var find = Connexion.findOne({\n      userIdNow: sessionID\n    });\n    var message = event.target.message.value;\n\n    if (message) {\n      var now = new Date();\n      var hash3 = {\n        idClient1: sessionID,\n        idClient2: contactID,\n        message: message,\n        lu: \"false\",\n        hours: now.getTime(),\n        luClient1: \"true\",\n        luClient2: \"true\"\n      };\n      var time = now.getTime();\n      Meteor.call('message', hash3, function (data3) {});\n      Meteor.call('lastMessage', time, sessionID, contactID);\n      $('#messages').val('');\n    }\n  }\n});","map":{"version":3,"sources":["client/Chat/message/message.js"],"names":["Template","message","rendered","document","title","sessionID","Session","get","Router","go","Tracker","autorun","Inscription","find","user","findOne","_id","etat","heure","Date","heureDeco","getTime","Meteor","call","set","helpers","messages","contactID","Message","$or","idClient1","idClient2","luClient1","luClient2","sort","hours","fetch","color","infoPerso","infoPersonne","Contact","userIdNow","contact","lastConnexion","deco","Connexion","deconnexion","date","day","getDate","month","getMonth","year","getFullYear","getHours","minutes","getMinutes","final","couleur","statut","events","event","preventDefault","stopPropagation","target","value","now","hash3","lu","time","data3","$","val"],"mappings":"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","file":"client/Chat/message/message.js.map","sourcesContent":["Template.message.rendered = function() {\n  document.title = \"Message\";\n\n  var sessionID = Session.get(\"userID\");\n  if(sessionID == null){\n    Router.go('/connexion');\n  }\n\n  Tracker.autorun(function() {\n    Inscription.find();\n\n    var user = Inscription.findOne({\n      _id: Session.get('userID'),\n      etat: false,\n    });\n\n    if (user) {\n      var sessionID = Session.get(\"userID\");\n      var heure = new Date();\n      var heureDeco = heure.getTime();\n      Meteor.call('deco', sessionID);\n      Meteor.call('heureDeco', sessionID, heureDeco);\n      Session.set(\"userID\", null);\n      if (Session.get(\"userID\") == null) {\n        Router.go('/connexion');\n      };\n    }\n  });\n};\n\n\nTemplate.message.helpers({\n  messages: function() {\n    var sessionID = Session.get(\"userID\");\n    var contactID = Session.get(\"contactID\");\n    Meteor.call('notification', sessionID, contactID);\n    return Message.find({\n      $or: [{\n        idClient1: sessionID,\n        idClient2: contactID,\n        luClient1: \"true\",\n      }, {\n        idClient1: contactID,\n        idClient2: sessionID,\n        luClient2: \"true\",\n      }],\n    }, {\n      sort: {\n        hours: 1,\n      },\n    }).fetch();\n  },\n\n  color: function() {\n    if (this.idClient1 === Session.get(\"userID\")) {\n      return 'text-success text-right';\n    }\n    return 'text-danger text-left ';\n  },\n\n  infoPerso: function() {\n    var sessionID = Session.get(\"userID\");\n    var contactID = Session.get(\"contactID\");\n    var infoPersonne = Contact.find({\n      userIdNow: sessionID,\n      contact: contactID,\n    });\n    return infoPersonne;\n  },\n\n  lastConnexion: function() {\n    var contactID = Session.get(\"contactID\");\n    var sessionID = Session.get(\"userID\");\n    var deco = Connexion.findOne({\n      userIdNow: contactID,\n    });\n    if(deco.deconnexion != 0){\n      var deconnexion = deco.deconnexion;\n      var date = new Date(deconnexion);\n      var day = date.getDate();\n      var month = date.getMonth()+1;\n      var year = date.getFullYear();\n      var hours = date.getHours();\n      var minutes =  date.getMinutes();\n      var final = \"Hors ligne depuis \"+day+\"/\"+month+\"/\"+year+\"  \"+hours +\":\"+minutes;\n      return final ;\n    }else{\n      return \"En ligne\";\n    }\n  },\n\n  couleur: function(){\n    var contactID = Session.get(\"contactID\");\n    var sessionID = Session.get(\"userID\");\n    var deco = Connexion.findOne({\n      userIdNow: contactID,\n    });\n    if(deco.deconnexion == 0){\n      return 'text-success'\n    }else{\n      return 'text-danger'\n    }\n  },\n\n  statut : function(){\n    var contactID = Session.get(\"contactID\");\n    var statut = Inscription.findOne({\n      _id : contactID,\n    });\n    if(statut){\n      return statut.statut;\n    }\n  }\n\n});\n\n\nTemplate.message.events({\n  'submit form': function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    var sessionID = Session.get(\"userID\");\n    var contactID = Session.get(\"contactID\");\n    var find = Connexion.findOne({\n      userIdNow: sessionID,\n    });\n    var message = event.target.message.value;\n    if (message) {\n      var now = new Date();\n      var hash3 = {\n        idClient1: sessionID,\n        idClient2: contactID,\n        message: message,\n        lu: \"false\",\n        hours: now.getTime(),\n        luClient1 : \"true\",\n        luClient2 : \"true\",\n      };\n      var time = now.getTime();\n      Meteor.call('message', hash3, function(data3) {});\n      Meteor.call('lastMessage', time, sessionID, contactID);\n      $('#messages').val('');\n    }\n  },\n});\n"]},"hash":"80975ac425c40ef75050034a546677ade77b3f29"}
